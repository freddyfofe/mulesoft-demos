<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="multiplication-test-suite.xml" />
	<munit:test name="multiplication-should-add-numbers-successfully" doc:id="4b69ced4-9635-4fcb-9933-836c0afc9d46" description="Test">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when GET: multiplication" doc:id="a3adf98b-397b-473e-bb81-d2e154dcd056" processor="http:request">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute whereValue="calculator_api_request_configuration" attributeName="config-ref" />
				</munit-tools:with-attributes>
			<munit-tools:then-return>
				<munit-tools:payload value="#[output application/json --- readUrl('classpath://calculator/multiplication/mock-get-multiply-response-success.json')]" mediaType="application/json" encoding="UTF-8" />
			</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="3bb84665-5762-4026-8fbe-a7f0bfd85496" >
				<munit:payload value="#[readUrl('classpath://calculator/multiplication/get-multiplication-request-success.json')]" encoding="UTF-8" mediaType="application/json" />
			</munit:set-event>
			<flow-ref doc:name="multiplication" doc:id="261c936c-2e4e-4a94-aa3c-ad085f856c3d" name="multiplication"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="2250b884-24b4-42a4-9854-8a78e84474ae" actual="#[payload]" expected="#[readUrl('classpath://calculator/multiplication/get-multiplication-response-success.json')]"/>
			<munit-tools:verify-call doc:name="Verify call" doc:id="aafa2f80-a904-4b4c-a449-611ff87ad6f6" processor="logger">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="END: multiplication flow" attributeName="doc:name" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="multiplication-validation-should-add-numbers-when-success-response" doc:id="07bac835-8c98-4526-af75-adf43cdc7cf9" description="Test" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when GET: multiplication" doc:id="8b217fb3-c90f-43cb-a4c9-65cc105df74e" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="calculator_api_request_configuration" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/json --- readUrl('classpath://calculator/multiplication/mock-get-multiply-response-success.json')]" mediaType="application/json" encoding="UTF-8" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="a8704592-5af1-4f32-a0c7-2429b6d74fe2" >
				<munit:payload value="#[readUrl('classpath://calculator/multiplication/get-multiplication-with-validation-request-success.json')]" encoding="UTF-8" mediaType="application/json" />
			</munit:set-event>
			<flow-ref doc:name="multiplication-with-validation" doc:id="4d5148e5-2dd0-48af-86a3-de318cd31726" name="multiplication-with-validation" />
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="abc8ffd7-3eac-49ef-b6bf-34935d464aa2" actual="#[payload]" expected="#[readUrl('classpath://calculator/multiplication/get-multiplication-response-success.json')]" />
			<munit-tools:verify-call doc:name="Verify call" doc:id="e732e9ab-e539-448c-b9da-bf84b98bfbf0" processor="logger" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="END: multiplication flow" attributeName="doc:name" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="multiplication-validation-should-not-add-numbers-when-fail-response" doc:id="95fb3be5-cfd8-4ff0-9610-20d30d462d19" description="Test" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when GET: multiplication" doc:id="a130d708-293f-45cf-be63-22b1352e8564" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="calculator_api_request_configuration" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/json --- readUrl('classpath://calculator/multiplication/mock-get-multiply-response-fail.json')]" mediaType="application/json" encoding="UTF-8" />
				</munit-tools:then-return>
			
</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="4618c31d-fdce-4b26-96a7-4048b3da5de9" >
				<munit:payload value="#[readUrl('classpath://calculator/multiplication/get-multiplication-with-validation-request-success.json')]" encoding="UTF-8" mediaType="application/json" />

			</munit:set-event>
			<flow-ref doc:name="multiplication-with-validation" doc:id="f6285b62-af0d-44ab-beed-7e12dd372a9f" name="multiplication-with-validation" />
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="96b45341-35ee-48e0-99c9-1a4961855906" actual="#[payload]" expected="#[readUrl('classpath://calculator/multiplication/get-multiplication-with-validation-response-fail.json')]" />
			<munit-tools:verify-call doc:name="Verify call" doc:id="370b3953-c681-4873-99b1-0f7d9a84671e" processor="logger" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="END: multiplication flow" attributeName="doc:name" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="multiplication-error-should-add-numbers-successfuly" doc:id="159c4188-bf1c-4b16-849b-1945d533fb1b" description="Test" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when GET: multiplication" doc:id="96bb387f-55cf-46c6-bf66-7e2834b470fc" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="calculator_api_request_configuration" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/json --- readUrl('classpath://calculator/multiplication/mock-get-multiply-response-success.json')]" mediaType="application/json" encoding="UTF-8" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="6f74490a-b404-4421-9ded-5c3c57ae3c66" >
				<munit:payload value="#[readUrl('classpath://calculator/multiplication/get-multiplication-request-success.json')]" encoding="UTF-8" mediaType="application/json" />
			</munit:set-event>
			<flow-ref doc:name="multiplication-with-errror" doc:id="f5ef1d67-aeb4-4be4-a761-ad571ec4aec4" name="multiplication-with-error" />
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="a98db180-588f-4bc7-9ddb-ebc84b33e57e" actual="#[payload]" expected="#[readUrl('classpath://calculator/multiplication/get-multiplication-response-success.json')]" />
			<munit-tools:verify-call doc:name="Verify call" doc:id="ee8a1376-ddeb-4d5a-a638-4c956bb84e96" processor="logger" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="END: multiplication flow" attributeName="doc:name" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="multiplication-error-should-not-add-numbers-when-fail-response" doc:id="4a2e599c-4b54-4fe8-aeed-60682d817a38" description="Test" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when GET: multiplication" doc:id="885ba707-313b-4be7-8633-19310f579734" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="calculator_api_request_configuration" attributeName="config-ref" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value="#[output application/json --- readUrl('classpath://calculator/multiplication/mock-get-multiply-response-success.json')]" encoding="UTF-8" />
					<munit-tools:error typeId="HTTP:NOT_FOUND" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="35811201-ec70-4ec3-8541-00e1654a6c00" >
				<munit:payload value="#[readUrl('classpath://calculator/multiplication/get-multiplication-request-success.json')]" encoding="UTF-8" mediaType="application/json" />
			</munit:set-event>
			<flow-ref doc:name="multiplication-with-errror" doc:id="7b103814-287d-4383-9505-44629e15cdd3" name="multiplication-with-error" />
		</munit:execution>
		<munit:validation>
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="d4981bae-04cf-407e-97b6-314a44618132" actual="#[payload]" expected="#[readUrl('classpath://calculator/multiplication/get-multiplication-with-validation-response-fail.json')]" />
			<munit-tools:verify-call doc:name="Verify call" doc:id="136348f0-8d39-496d-89bb-185e51056745" processor="logger">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="b35f78c8-560b-423e-b466-2d45be93d8ab" attributeName="doc:id" />
				</munit-tools:with-attributes>

			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>


</mule>
